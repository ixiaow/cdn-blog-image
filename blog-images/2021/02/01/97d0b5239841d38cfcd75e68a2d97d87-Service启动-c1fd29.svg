<?xml version="1.0" standalone="no"?>
<svg style="background: #fff" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="749px" height="234px" viewBox="-0.5 -0.5 749 234"><defs><style>* {margin: 0px; padding: 0px;}</style></defs><g><path d="M 100 63 L 173.63 63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 178.88 63 L 171.88 66.5 L 173.63 63 L 171.88 59.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="0" y="33" width="100" height="60" rx="4.2" ry="4.2" fill="#ffffff" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="49.5" y="66.5">ContextWraper</text></g><path d="M 280 63 L 353.63 63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 358.88 63 L 351.88 66.5 L 353.63 63 L 351.88 59.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="180" y="33" width="100" height="60" rx="4.2" ry="4.2" fill="#ffffff" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="229.5" y="66.5">ContextImpl</text></g><path d="M 460 63 L 533.63 63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 538.88 63 L 531.88 66.5 L 533.63 63 L 531.88 59.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="360" y="33" width="100" height="60" rx="4.2" ry="4.2" fill="#ffffff" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="409.5" y="66.5">IAcitivtyManager</text></g><path d="M 590 93 L 590 166.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 590 171.88 L 586.5 164.88 L 590 166.63 L 593.5 164.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="540" y="33" width="100" height="60" rx="4.2" ry="4.2" fill="#ffffff" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="589.5" y="66.5">AMS</text></g><path d="M 540 203 L 466.37 203" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 461.12 203 L 468.12 199.5 L 466.37 203 L 468.12 206.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="540" y="173" width="100" height="60" rx="4.2" ry="4.2" fill="#ffffff" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="589.5" y="199.5">ApplicationThread</text><text x="589.5" y="213.5">是一个binder</text></g><path d="M 360 203 L 286.37 203" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 281.12 203 L 288.12 199.5 L 286.37 203 L 288.12 206.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="360" y="173" width="100" height="60" rx="4.2" ry="4.2" fill="#ffffff" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="409.5" y="199.5">发送</text><text x="409.5" y="213.5">sendMessage()</text></g><path d="M 180 203 L 106.37 203" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 101.12 203 L 108.12 199.5 L 106.37 203 L 108.12 206.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="180" y="173" width="100" height="60" rx="4.2" ry="4.2" fill="#ffffff" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="229.5" y="199.5">处理消息</text><text x="229.5" y="213.5">handleMessage</text></g><rect x="0" y="173" width="100" height="60" rx="4.2" ry="4.2" fill="#ffffff" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="49.5" y="192.5">ActivityThread中H</text><text x="49.5" y="206.5">内部类onCreate()</text><text x="49.5" y="220.5">创建service</text></g><g transform="translate(4.5,2.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="64" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Service启动</div></div></foreignObject></g><g transform="translate(129.5,23.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="71" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">startService()</div></div></foreignObject></g><g transform="translate(310.5,24.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="71" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">startService()</div></div></foreignObject></g><g transform="translate(483.5,25.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="71" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">startService()</div></div></foreignObject></g><g transform="translate(607.5,119.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="135" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">AMS与ApplicationThread<br/>最终会调用<br/>scheduleCreateService()</div></div></foreignObject></g><g transform="translate(204.5,107.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="120" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">startServiceCommon()</div></div></foreignObject></g></g></svg>